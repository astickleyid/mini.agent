# Mini.Agent Development Session - Dec 2, 2025

## What We Built

### 1. **Flexible Tab System**
- Browser-like tabs at top of dashboard
- Add/remove tabs dynamically
- Drag tabs to detach into separate windows (needs fix)
- Right-click context menu on tabs

### 2. **Configuration GUI**
Location: `Sources/Dashboard/ConfigurationView.swift`
- AI Tools config (Copilot, Gemini, OpenAI, Ollama)
- Toggle on/off
- Set CLI commands
- Smart routing (which AI for what task)
- Custom commands management

### 3. **Core Architecture Decision**

```
Simple System Design:
- 3 Core Agents: ProjectAgent, CodeAgent, KnowledgeAgent
- AI Integration Layer: Routes to Copilot/Gemini/OpenAI/Ollama
- Flexible GUI: Tabs you can move/add/remove
- CLI syncs with GUI config (~/.mini/config.json)
```

### 4. **Key Features Needed**

**AI Integration:**
- Copilot CLI for code generation
- Gemini CLI for questions
- OpenAI API for complex reasoning  
- Ollama for local models
- Smart routing based on task type

**Project Management:**
- Break down huge projects into tasks
- Track progress
- Daily workflow (start/done/today)
- Remember where you left off

**Code Generation:**
- Natural language → code
- Learn your patterns automatically
- Save custom commands
- Reuse what works

**Knowledge Base:**
- Auto-save notes/decisions
- Search everything
- Build knowledge over time

## Current Status

### ✅ Working:
- Basic dashboard with agent list
- Configuration GUI (layout fixed)
- Flexible tab system (visual working)
- Build system (swift build works)
- Launch script: `./open-dashboard.sh`

### ❌ Needs Fix:
1. **Tab dragging** - gesture not working, needs debugging
2. **AI tool integration** - adapters not built yet
3. **Project breakdown system** - not implemented
4. **Code generation** - needs AI connection
5. **Knowledge base** - needs implementation

## File Structure

```
mini.agent/
├── Sources/
│   ├── MiniAgentCore/          # Core framework
│   │   ├── Agent.swift
│   │   ├── AgentManager.swift
│   │   ├── Configuration.swift
│   │   └── Logger.swift
│   │
│   ├── Agents/                 # Individual agents
│   │   ├── BuilderAgent.swift
│   │   ├── TestAgent.swift
│   │   ├── RepoAgent.swift
│   │   ├── MemoryAgent.swift
│   │   ├── GeneratorAgent.swift
│   │   ├── LanguageAgent.swift  (complex, maybe remove)
│   │   └── WorkflowAgent.swift  (complex, maybe remove)
│   │
│   ├── Dashboard/              # GUI
│   │   ├── MiniDashboardApp.swift
│   │   ├── ConfigurationView.swift
│   │   └── FlexibleTabView.swift
│   │
│   └── CLI/                    # Command line
│       └── main.swift
│
├── Package.swift
├── open-dashboard.sh          # Launch GUI
└── ~/.mini/                   # User data (will be)
    ├── config.json           # Settings
    └── projects/             # Project data
```

## Next Steps (Priority Order)

### Phase 1: Fix Foundation
1. Fix tab drag gesture (DragGesture not triggering)
2. Simplify agents - remove LanguageAgent/WorkflowAgent complexity
3. Create ConfigurationManager save/load to JSON

### Phase 2: AI Integration
4. Build AIRouter.swift
5. Create adapters:
   - CopilotAdapter (wraps `gh copilot`)
   - GeminiAdapter (wraps `gemini`)
   - OpenAIAdapter (API)
   - OllamaAdapter (wraps `ollama`)
6. Test connections in GUI

### Phase 3: Core Features  
7. ProjectAgent - break down projects
8. CodeAgent - generate code via AI
9. KnowledgeAgent - save/search notes
10. Wire GUI to agents

### Phase 4: Polish
11. Better UI/UX
12. Command palette (Cmd+K)
13. Keyboard shortcuts
14. Export/import config

## User's Needs (Critical Context)

**Profile:**
- Not a trained software engineer
- Building huge complex platforms using AI
- Needs structure to not lose track
- Wants workflow automation
- Vibe coder - needs tools that make sense
- Builds: games, mobile apps, web apps, AI frameworks, custom CLIs

**Pain Points:**
1. Projects too big to keep in head
2. Forgets pieces of complex systems
3. No clear development process
4. Too much to remember
5. Needs system to automate workflow

**Solution Required:**
- Break down huge ideas automatically
- Track progress visually
- Generate code from natural language
- Remember decisions/patterns
- Learn user's way of working
- NO memorization of commands
- AI learns the user's language, not vice versa

## Commands (Proposed, User Will Modify)

```bash
# Project
mini new "idea"
mini open [name]
mini list
mini where
mini plan

# Daily Work
mini start
mini next
mini done
mini progress
mini today

# Code Generation  
mini build "thing"
mini add "feature"
mini fix "issue"

# AI Tools
mini ai list
mini --copilot build "thing"
mini --gemini ask "question"

# Knowledge
mini note "something"
mini search "topic"
mini why "decision"
```

## Key Insights from Session

1. **Keep it simple** - tried complex language DSL, user rejected it
2. **GUI first** - user wants to configure everything visually
3. **Flexible tabs** - user wants browser-like tab management
4. **AI hub** - route to best AI tool automatically
5. **Learn patterns** - system should learn user's style automatically
6. **No training** - user shouldn't have to teach the system explicitly

## Technical Decisions

### What to Keep:
- Swift/SwiftUI for macOS (native, fast)
- JSON for config/storage (simple, readable)
- CLI + GUI (both needed)
- Agent architecture (clean separation)

### What to Simplify:
- Remove LanguageAgent (too complex)
- Remove WorkflowAgent (too rigid)
- Just 3 core agents: Project, Code, Knowledge
- Keep AI routing simple

### What to Add:
- AI adapter layer
- Tab persistence
- Config save/load
- Project breakdown logic

## Build/Run Commands

```bash
# Build CLI
swift build

# Build Dashboard
swift build --product MiniDashboard

# Run Dashboard
./open-dashboard.sh

# Or directly
.build/debug/MiniDashboard
```

## Issues to Debug

1. **Tab drag not working** - DragGesture in FlexibleTabView.swift line ~108
2. **Context menu works** - right-click tabs shows menu, drag doesn't
3. **Config not persisting** - ConfigurationManager needs save/load
4. **AI tools not connected** - adapters don't exist yet

## User Feedback on UI

- Tab bar was jumping around (FIXED with GeometryReader)
- Sidebar layout was messed up (FIXED removed NavigationView)
- Wants draggable tabs (NOT WORKING YET)
- Wants multiple windows (coded but untested)
- UI needs polish overall

---

**Session ended at:** 2025-12-02 ~08:04 AM PST
**Token usage:** ~79k/1M (not critically truncated, but getting there)
**Status:** Foundation built, needs debugging and feature implementation
